<!doctype html>
<html class="no-js" lang="en" data-content_root="">
  <head><meta charset="utf-8"/>
    <meta name="viewport" content="width=device-width,initial-scale=1"/>
    <meta name="color-scheme" content="light dark"><meta name="viewport" content="width=device-width, initial-scale=1" />
<link rel="index" title="Index" href="../../../genindex.html" /><link rel="search" title="Search" href="../../../search.html" /><link rel="next" title="Model Development, Tuning, Selection, Ensembles, Calibration" href="../../ch7_model_development/index.html" /><link rel="prev" title="Validating Historical Features with Great Expectations" href="validate_historical_with_gx.html" />

    <link rel="shortcut icon" href="../../../_static/favicon.ico"/><!-- Generated with Sphinx 7.1.2 and Furo 2024.05.06 -->
        <title>Adding or Reusing Tests in Feast - Home</title>
      <link rel="stylesheet" type="text/css" href="../../../_static/pygments.css?v=a746c00c" />
    <link rel="stylesheet" type="text/css" href="../../../_static/styles/furo.css?v=387cc868" />
    <link rel="stylesheet" type="text/css" href="../../../_static/styles/furo-extensions.css?v=36a5483c" />
    <link rel="stylesheet" type="text/css" href="../../../_static/css/style.css?v=8a7ff5ee" />
    
    


<style>
  body {
    --color-code-background: #f8f8f8;
  --color-code-foreground: black;
  
  }
  @media not print {
    body[data-theme="dark"] {
      --color-code-background: #202020;
  --color-code-foreground: #d0d0d0;
  
    }
    @media (prefers-color-scheme: dark) {
      body:not([data-theme="light"]) {
        --color-code-background: #202020;
  --color-code-foreground: #d0d0d0;
  
      }
    }
  }
</style></head>
  <body>
    
    <script>
      document.body.dataset.theme = localStorage.getItem("theme") || "auto";
    </script>
    

<svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
  <symbol id="svg-toc" viewBox="0 0 24 24">
    <title>Contents</title>
    <svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 1024 1024">
      <path d="M408 442h480c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H408c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8zm-8 204c0 4.4 3.6 8 8 8h480c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H408c-4.4 0-8 3.6-8 8v56zm504-486H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zm0 632H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zM115.4 518.9L271.7 642c5.8 4.6 14.4.5 14.4-6.9V388.9c0-7.4-8.5-11.5-14.4-6.9L115.4 505.1a8.74 8.74 0 0 0 0 13.8z"/>
    </svg>
  </symbol>
  <symbol id="svg-menu" viewBox="0 0 24 24">
    <title>Menu</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather-menu">
      <line x1="3" y1="12" x2="21" y2="12"></line>
      <line x1="3" y1="6" x2="21" y2="6"></line>
      <line x1="3" y1="18" x2="21" y2="18"></line>
    </svg>
  </symbol>
  <symbol id="svg-arrow-right" viewBox="0 0 24 24">
    <title>Expand</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather-chevron-right">
      <polyline points="9 18 15 12 9 6"></polyline>
    </svg>
  </symbol>
  <symbol id="svg-sun" viewBox="0 0 24 24">
    <title>Light mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round" class="feather-sun">
      <circle cx="12" cy="12" r="5"></circle>
      <line x1="12" y1="1" x2="12" y2="3"></line>
      <line x1="12" y1="21" x2="12" y2="23"></line>
      <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
      <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
      <line x1="1" y1="12" x2="3" y2="12"></line>
      <line x1="21" y1="12" x2="23" y2="12"></line>
      <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
      <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
    </svg>
  </symbol>
  <symbol id="svg-moon" viewBox="0 0 24 24">
    <title>Dark mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-moon">
      <path stroke="none" d="M0 0h24v24H0z" fill="none" />
      <path d="M12 3c.132 0 .263 0 .393 0a7.5 7.5 0 0 0 7.92 12.446a9 9 0 1 1 -8.313 -12.454z" />
    </svg>
  </symbol>
  <symbol id="svg-sun-half" viewBox="0 0 24 24">
    <title>Auto light/dark mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-shadow">
      <path stroke="none" d="M0 0h24v24H0z" fill="none"/>
      <circle cx="12" cy="12" r="9" />
      <path d="M13 12h5" />
      <path d="M13 15h4" />
      <path d="M13 18h1" />
      <path d="M13 9h4" />
      <path d="M13 6h1" />
    </svg>
  </symbol>
  <symbol id="svg-sun-with-moon" viewBox="0 0 24 24">
    <title>Auto light/dark, in light mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round"
      class="icon-custom-derived-from-feather-sun-and-tabler-moon">
      <path style="opacity: 50%" d="M 5.411 14.504 C 5.471 14.504 5.532 14.504 5.591 14.504 C 3.639 16.319 4.383 19.569 6.931 20.352 C 7.693 20.586 8.512 20.551 9.25 20.252 C 8.023 23.207 4.056 23.725 2.11 21.184 C 0.166 18.642 1.702 14.949 4.874 14.536 C 5.051 14.512 5.231 14.5 5.411 14.5 L 5.411 14.504 Z"/>
      <line x1="14.5" y1="3.25" x2="14.5" y2="1.25"/>
      <line x1="14.5" y1="15.85" x2="14.5" y2="17.85"/>
      <line x1="10.044" y1="5.094" x2="8.63" y2="3.68"/>
      <line x1="19" y1="14.05" x2="20.414" y2="15.464"/>
      <line x1="8.2" y1="9.55" x2="6.2" y2="9.55"/>
      <line x1="20.8" y1="9.55" x2="22.8" y2="9.55"/>
      <line x1="10.044" y1="14.006" x2="8.63" y2="15.42"/>
      <line x1="19" y1="5.05" x2="20.414" y2="3.636"/>
      <circle cx="14.5" cy="9.55" r="3.6"/>
    </svg>
  </symbol>
  <symbol id="svg-moon-with-sun" viewBox="0 0 24 24">
    <title>Auto light/dark, in dark mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round"
      class="icon-custom-derived-from-feather-sun-and-tabler-moon">
      <path d="M 8.282 7.007 C 8.385 7.007 8.494 7.007 8.595 7.007 C 5.18 10.184 6.481 15.869 10.942 17.24 C 12.275 17.648 13.706 17.589 15 17.066 C 12.851 22.236 5.91 23.143 2.505 18.696 C -0.897 14.249 1.791 7.786 7.342 7.063 C 7.652 7.021 7.965 7 8.282 7 L 8.282 7.007 Z"/>
      <line style="opacity: 50%" x1="18" y1="3.705" x2="18" y2="2.5"/>
      <line style="opacity: 50%" x1="18" y1="11.295" x2="18" y2="12.5"/>
      <line style="opacity: 50%" x1="15.316" y1="4.816" x2="14.464" y2="3.964"/>
      <line style="opacity: 50%" x1="20.711" y1="10.212" x2="21.563" y2="11.063"/>
      <line style="opacity: 50%" x1="14.205" y1="7.5" x2="13.001" y2="7.5"/>
      <line style="opacity: 50%" x1="21.795" y1="7.5" x2="23" y2="7.5"/>
      <line style="opacity: 50%" x1="15.316" y1="10.184" x2="14.464" y2="11.036"/>
      <line style="opacity: 50%" x1="20.711" y1="4.789" x2="21.563" y2="3.937"/>
      <circle style="opacity: 50%" cx="18" cy="7.5" r="2.169"/>
    </svg>
  </symbol>
  <symbol id="svg-pencil" viewBox="0 0 24 24">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-pencil-code">
      <path d="M4 20h4l10.5 -10.5a2.828 2.828 0 1 0 -4 -4l-10.5 10.5v4" />
      <path d="M13.5 6.5l4 4" />
      <path d="M20 21l2 -2l-2 -2" />
      <path d="M17 17l-2 2l2 2" /
    </svg>
  </symbol>
  <symbol id="svg-eye" viewBox="0 0 24 24">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-eye-code">
      <path stroke="none" d="M0 0h24v24H0z" fill="none" />
      <path d="M10 12a2 2 0 1 0 4 0a2 2 0 0 0 -4 0" />
      <path
        d="M11.11 17.958c-3.209 -.307 -5.91 -2.293 -8.11 -5.958c2.4 -4 5.4 -6 9 -6c3.6 0 6.6 2 9 6c-.21 .352 -.427 .688 -.647 1.008" />
      <path d="M20 21l2 -2l-2 -2" />
      <path d="M17 17l-2 2l2 2" />
    </svg>
  </symbol>
</svg>

<input type="checkbox" class="sidebar-toggle" name="__navigation" id="__navigation">
<input type="checkbox" class="sidebar-toggle" name="__toc" id="__toc">
<label class="overlay sidebar-overlay" for="__navigation">
  <div class="visually-hidden">Hide navigation sidebar</div>
</label>
<label class="overlay toc-overlay" for="__toc">
  <div class="visually-hidden">Hide table of contents sidebar</div>
</label>

<a class="skip-to-content muted-link" href="#furo-main-content">Skip to content</a>



<div class="page">
  <header class="mobile-header">
    <div class="header-left">
      <label class="nav-overlay-icon" for="__navigation">
        <div class="visually-hidden">Toggle site navigation sidebar</div>
        <i class="icon"><svg><use href="#svg-menu"></use></svg></i>
      </label>
    </div>
    <div class="header-center">
      <a href="../../../index.html"><div class="brand">Home</div></a>
    </div>
    <div class="header-right">
      <div class="theme-toggle-container theme-toggle-header">
        <button class="theme-toggle">
          <div class="visually-hidden">Toggle Light / Dark / Auto color theme</div>
          <svg class="theme-icon-when-auto-light"><use href="#svg-sun-with-moon"></use></svg>
          <svg class="theme-icon-when-auto-dark"><use href="#svg-moon-with-sun"></use></svg>
          <svg class="theme-icon-when-dark"><use href="#svg-moon"></use></svg>
          <svg class="theme-icon-when-light"><use href="#svg-sun"></use></svg>
        </button>
      </div>
      <label class="toc-overlay-icon toc-header-icon" for="__toc">
        <div class="visually-hidden">Toggle table of contents sidebar</div>
        <i class="icon"><svg><use href="#svg-toc"></use></svg></i>
      </label>
    </div>
  </header>
  <aside class="sidebar-drawer">
    <div class="sidebar-container">
      
      <div class="sidebar-sticky"><a class="sidebar-brand" href="../../../index.html">
  
  
  <span class="sidebar-brand-text">Home</span>
  
</a><form class="sidebar-search-container" method="get" action="../../../search.html" role="search">
  <input class="sidebar-search" placeholder="Search" name="q" aria-label="Search">
  <input type="hidden" name="check_keywords" value="yes">
  <input type="hidden" name="area" value="default">
</form>
<div id="searchbox"></div><div class="sidebar-scroll"><div class="sidebar-tree">
  <ul>
<li class="toctree-l1 has-children"><a class="reference internal" href="../../../past_experiences/index.html">Past Experiences</a><input class="toctree-checkbox" id="toctree-checkbox-1" name="toctree-checkbox-1" role="switch" type="checkbox"/><label for="toctree-checkbox-1"><div class="visually-hidden">Toggle navigation of Past Experiences</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../past_experiences/iot_anomaly.html">Anomaly Detection in Time Series IoT Data</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../past_experiences/iot_forecasting.html">Energy Demand Forecasting in Time Series IoT Data</a></li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../../../past_experiences/adas_engine/index.html">ADAS: Data Engine</a><input class="toctree-checkbox" id="toctree-checkbox-2" name="toctree-checkbox-2" role="switch" type="checkbox"/><label for="toctree-checkbox-2"><div class="visually-hidden">Toggle navigation of ADAS: Data Engine</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../past_experiences/adas_engine/ch0_business_challenge.html">Business Challenge and Goals</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../past_experiences/adas_engine/ch1_ml_problem_framing.html">ML Problem Framing</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../past_experiences/adas_engine/ch2_operational_strategy.html">Planning, Operational Strategy</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../past_experiences/adas_engine/ch3_pipelines_workflows.html">Workflows, Team, Roles</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../past_experiences/adas_engine/ch4_testing_strategy.html">Testing Strategy</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../past_experiences/adas_engine/ch6_data_ingestion_workflows.html">Data Ingestion Workflows</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../past_experiences/adas_engine/ch7_scene_understanding_data_mining.html">Scene Understanding &amp; Data Mining</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../past_experiences/adas_engine/ch8_model_training.html">Model Training &amp; Experimentation</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../past_experiences/adas_engine/ch9_packaging_promotion.html">Packaging, Evaluation &amp; Promotion Workflows</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../past_experiences/adas_engine/ch10_deployment_serving.html">Deployment &amp; Serving</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../past_experiences/adas_engine/ch11_monitoring_continual_learning.html">Monitoring &amp; Continual Learning</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../past_experiences/adas_engine/ch12_cost_lifecycle_compliance.html">Cost, Lifecycle, Compliance</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../past_experiences/adas_engine/ch13_reliability_capacity_maps.html">Reliability, Capacity, Maps</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../past_experiences/ecom_cltv.html">Customer Lifetime Value</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../past_experiences/ecom_propensity.html">Real-Time Purchase Intent Scoring</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../past_experiences/ecom_summarisation.html">Reviews Summarisation</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../past_experiences/ecom_rag.html">RAG-Based Product Discovery</a></li>
</ul>
</li>
</ul>
<ul>
<li class="toctree-l1 has-children"><a class="reference internal" href="../../../projects/index.html">Projects</a><input class="toctree-checkbox" id="toctree-checkbox-3" name="toctree-checkbox-3" role="switch" type="checkbox"/><label for="toctree-checkbox-3"><div class="visually-hidden">Toggle navigation of Projects</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2 has-children"><a class="reference internal" href="../../../projects/nlp/index.html">Natural Language Processing</a><input class="toctree-checkbox" id="toctree-checkbox-4" name="toctree-checkbox-4" role="switch" type="checkbox"/><label for="toctree-checkbox-4"><div class="visually-hidden">Toggle navigation of Natural Language Processing</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3"><a class="reference external" href="https://www.deepakkarkala.com/docs/articles/machine_learning/airbnb_alternate_search/about/index.html">Airbnb Listing description based Semantic Search</a></li>
</ul>
</li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../../../projects/cv/index.html">Computer Vision</a><input class="toctree-checkbox" id="toctree-checkbox-5" name="toctree-checkbox-5" role="switch" type="checkbox"/><label for="toctree-checkbox-5"><div class="visually-hidden">Toggle navigation of Computer Vision</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3"><a class="reference external" href="https://www.deepakkarkala.com/docs/articles/machine_learning/ecommerce_image_segmentation/about/index.html">Image Segmentation for Ecommerce Products</a></li>
</ul>
</li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../../../projects/ml/index.html">Machine Learning</a><input class="toctree-checkbox" id="toctree-checkbox-6" name="toctree-checkbox-6" role="switch" type="checkbox"/><label for="toctree-checkbox-6"><div class="visually-hidden">Toggle navigation of Machine Learning</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3"><a class="reference external" href="https://www.deepakkarkala.com/docs/articles/machine_learning/airbnb_price_modeling/about/index.html">Predictive Price Modeling for Airbnb listings</a></li>
</ul>
</li>
</ul>
</li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../publications/index.html">Patents, Papers, Thesis</a></li>
</ul>
<ul>
<li class="toctree-l1 has-children"><a class="reference internal" href="../../../agents/index.html">AI Agents: A Lead Engineer’s Handbook</a><input class="toctree-checkbox" id="toctree-checkbox-7" name="toctree-checkbox-7" role="switch" type="checkbox"/><label for="toctree-checkbox-7"><div class="visually-hidden">Toggle navigation of AI Agents: A Lead Engineer’s Handbook</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../agents/ch1_intro.html">Agent Fundamentals: What, Why, and When?</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../agents/ch2_patterns.html">Agentic Patterns</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../agents/ch5_context_engineering.html">Context Engineering for AI Agents</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../agents/ch6_case_studies.html">The State of the Industry: Insights from the Field</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../agents/ch7_conclusion.html"><strong>Conclusion: The Lead Engineer’s Mental Model for Building Agents</strong></a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../agents/ch_cost.html">Cost Optimization</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../agents/ch_data.html">Data Management and Knowledge Integration</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../agents/ch_deploy.html">Deployment and Scaling</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../agents/ch_guardrails.html">Guardrails</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../agents/ch_hitl.html">Human-in-the-Loop (HITL)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../agents/ch_latency.html">Latency Optimization</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../agents/ch_llm.html">LLM – Prompts, Goals, and Persona</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../agents/ch_memory.html">Managing Agent Memory (Short-Term and Long-Term)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../agents/ch_monitor.html">Monitoring and Observability</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../agents/ch_orchestration.html">Orchestration and Task Decomposition</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../agents/ch_prod.html">Production Challenges and Best Practices</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../agents/ch_security.html">Securing AI Agents and Preventing Abuse</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../agents/ch_tool.html">Tool Use and Integration Management</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../agents/ch_trust.html">Building Trustworthy and Ethical AI Agents</a></li>
</ul>
</li>
</ul>
<ul class="current">
<li class="toctree-l1 current has-children"><a class="reference internal" href="../../index.html">MLOps</a><input checked="" class="toctree-checkbox" id="toctree-checkbox-8" name="toctree-checkbox-8" role="switch" type="checkbox"/><label for="toctree-checkbox-8"><div class="visually-hidden">Toggle navigation of MLOps</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul class="current">
<li class="toctree-l2 has-children"><a class="reference internal" href="../../ch1_problem_framing.html">ML Problem framing</a><input class="toctree-checkbox" id="toctree-checkbox-9" name="toctree-checkbox-9" role="switch" type="checkbox"/><label for="toctree-checkbox-9"><div class="visually-hidden">Toggle navigation of ML Problem framing</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul class="simple">
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../ch2_blueprint_operational_strategy.html">The MLOps Blueprint &amp; Operational Strategy</a></li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../../ch2a_platform/index.html">ML Platforms</a><input class="toctree-checkbox" id="toctree-checkbox-10" name="toctree-checkbox-10" role="switch" type="checkbox"/><label for="toctree-checkbox-10"><div class="visually-hidden">Toggle navigation of ML Platforms</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../../ch2a_platform/ml_platforms.html">ML Platforms: How to</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../ch2a_platform/uber.html">Uber Michelangelo</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../ch2a_platform/linkedin.html">LinkedIn DARWIN</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../ch2a_platform/netflix.html">Netflix</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../ch2a_platform/shopify.html">Shopify Merlin</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../ch2a_platform/zomato.html">Zomato: Real-time ML</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../ch2a_platform/coveo.html">Coveo: MLOPs at reasonable scale</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../ch2a_platform/monzo.html">Monzo ML Stack</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../ch2a_platform/didact.html">Didact AI</a></li>
</ul>
</li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../../ch3_project_planning/index.html">Project Planning</a><input class="toctree-checkbox" id="toctree-checkbox-11" name="toctree-checkbox-11" role="switch" type="checkbox"/><label for="toctree-checkbox-11"><div class="visually-hidden">Toggle navigation of Project Planning</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../../ch3_project_planning/prd.html">Project Requirements Document</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../ch3_project_planning/tech_stack.html">Tech Stack</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../ch3_project_planning/config_management.html">Config Management</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../ch3_project_planning/pipeline_design.html">Pipeline Design</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../ch3_project_planning/environment_strategy.html">Environment Strategy</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../ch3_project_planning/cicd_branching_model.html">CI/CD Strategy and Branching Model</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../ch3_project_planning/directory_structure.html">Directory Structure</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../ch3_project_planning/env_branchind_cicd_deployment.html">Environments, Branching, CI/CD, and Deployments Explained</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../ch3_project_planning/project_management.html">Project Management for MLOps</a></li>
</ul>
</li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../../ch4_data_discovery/index.html">Data Sourcing, Discovery</a><input class="toctree-checkbox" id="toctree-checkbox-12" name="toctree-checkbox-12" role="switch" type="checkbox"/><label for="toctree-checkbox-12"><div class="visually-hidden">Toggle navigation of Data Sourcing, Discovery</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../../ch4_data_discovery/data_sourcing_discovery.html">Data Sourcing, Discovery &amp; Understanding</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../ch4_data_discovery/ch4_project.html">Project-Trending Now: Implementing Web Scraping, Ingestion</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../ch4_data_discovery/industry_case_studies.html">Data Discovery Platforms: Industry Case Studies</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../ch4_data_discovery/facebook_nemo.html">Facebook: Nemo</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../ch4_data_discovery/netflix_metacat.html">Netflix Metacat</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../ch4_data_discovery/uber_databook.html">Uber Databook</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../ch4_data_discovery/linkedin_datahub.html">LinkedIn Datahub</a></li>
</ul>
</li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../../ch5_data_pipelines/index.html">Data Engineering, Pipelines</a><input class="toctree-checkbox" id="toctree-checkbox-13" name="toctree-checkbox-13" role="switch" type="checkbox"/><label for="toctree-checkbox-13"><div class="visually-hidden">Toggle navigation of Data Engineering, Pipelines</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../../ch5_data_pipelines/data_pipelines.html">Data Engineering for Reliable ML Pipelines</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../ch5_data_pipelines/data_engineering_pipelines.html">Data Engineering &amp; Pipelines: A Lead’s Compendium</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../ch5_data_pipelines/streaming_pipelines.html">Real-Time &amp; Streaming Data Pipelines: Challenges, Solutions</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../ch5_data_pipelines/netflix_keystone.html">Netflix Keystone</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../ch5_data_pipelines/doordash_riviera.html">Doordash Riviera</a></li>
</ul>
</li>
<li class="toctree-l2 current has-children"><a class="reference internal" href="../index.html">Feature Engineering, Feature Stores</a><input checked="" class="toctree-checkbox" id="toctree-checkbox-14" name="toctree-checkbox-14" role="switch" type="checkbox"/><label for="toctree-checkbox-14"><div class="visually-hidden">Toggle navigation of Feature Engineering, Feature Stores</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="../feature_engineering_store.html">Feature Engineering and Feature Stores</a></li>
<li class="toctree-l3"><a class="reference internal" href="../feature_engineering.html">Feature Engineering for MLOps</a></li>
<li class="toctree-l3"><a class="reference internal" href="../explained_feature_stores.html">Feature Stores for MLOps</a></li>
<li class="toctree-l3"><a class="reference internal" href="../point_in_time.html">Point-in-Time Correctness &amp; Time Travel in ML Data Pipelines</a></li>
<li class="toctree-l3 current has-children"><a class="reference internal" href="index.html">Feast Feature Store</a><input checked="" class="toctree-checkbox" id="toctree-checkbox-15" name="toctree-checkbox-15" role="switch" type="checkbox"/><label for="toctree-checkbox-15"><div class="visually-hidden">Toggle navigation of Feast Feature Store</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul class="current">
<li class="toctree-l4"><a class="reference internal" href="feast_architecture.html">Feast Architecture: A Technical Deep Dive for MLOps</a></li>
<li class="toctree-l4"><a class="reference internal" href="feast_concepts.html">Feast Concepts</a></li>
<li class="toctree-l4"><a class="reference internal" href="feast_components.html">Feast Components</a></li>
<li class="toctree-l4"><a class="reference internal" href="feast_usecases.html">Feast Use Cases</a></li>
<li class="toctree-l4"><a class="reference internal" href="feast_aws.html">Running Feast with AWS</a></li>
<li class="toctree-l4"><a class="reference internal" href="run_in_prod.html">Running Feast in Production</a></li>
<li class="toctree-l4"><a class="reference internal" href="validate_historical_with_gx.html">Validating Historical Features with Great Expectations</a></li>
<li class="toctree-l4 current current-page"><a class="current reference internal" href="#">Adding or Reusing Tests in Feast</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../../ch7_model_development/index.html">Model Development, Tuning, Selection, Ensembles, Calibration</a><input class="toctree-checkbox" id="toctree-checkbox-16" name="toctree-checkbox-16" role="switch" type="checkbox"/><label for="toctree-checkbox-16"><div class="visually-hidden">Toggle navigation of Model Development, Tuning, Selection, Ensembles, Calibration</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../../ch7_model_development/ch7_model_development.html">Chapter 7: Model Development</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../ch7_model_development/dl_training_playbook.html">How to train DL Models</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../ch7_model_development/development.html">Model Development</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../ch7_model_development/industry_lessons.html">Model Development: Lessons from production systems</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../ch7_model_development/ensembles.html"><strong>Model Ensembles</strong></a></li>
<li class="toctree-l3"><a class="reference internal" href="../../ch7_model_development/selection.html">Model Selection</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../ch7_model_development/tuning_hypopt.html">Hyperparameter Optimization</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../ch7_model_development/expt_tracking.html">ML Expt tracking, Data Lineage, Model Registry</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../ch7_model_development/calibration.html">Model Calibration</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../ch8_ml_pipelines.html">ML Training Pipelines</a></li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../../ch9_ml_testing/index.html">Testing in ML Systems</a><input class="toctree-checkbox" id="toctree-checkbox-17" name="toctree-checkbox-17" role="switch" type="checkbox"/><label for="toctree-checkbox-17"><div class="visually-hidden">Toggle navigation of Testing in ML Systems</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../../ch9_ml_testing/ch9_ml_testing.html">Testing in ML Systems</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../ch9_ml_testing/data_testing_validation.html">Data Testing &amp; Validation in Production</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../ch9_ml_testing/ml_testing.html">Testing ML Systems: Ensuring Reliability from Code to Production</a></li>
</ul>
</li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../../ch10_deployment_serving/index.html">Model Deployment &amp; Serving</a><input class="toctree-checkbox" id="toctree-checkbox-18" name="toctree-checkbox-18" role="switch" type="checkbox"/><label for="toctree-checkbox-18"><div class="visually-hidden">Toggle navigation of Model Deployment &amp; Serving</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../../ch10_deployment_serving/ch10_deployment_serving.html">Chapter 10: Deployment &amp; Serving</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../ch10_deployment_serving/guide_deployment_serving.html">Guide: Model Deployment &amp; Serving</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../ch10_deployment_serving/guide_inference_stack.html">Deep Dive: Inference Stack</a></li>
</ul>
</li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../../ch11_monitor_observe_drift/index.html">Monitoring, Observability, Drift, Interpretability</a><input class="toctree-checkbox" id="toctree-checkbox-19" name="toctree-checkbox-19" role="switch" type="checkbox"/><label for="toctree-checkbox-19"><div class="visually-hidden">Toggle navigation of Monitoring, Observability, Drift, Interpretability</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../../ch11_monitor_observe_drift/ch11_monitor_observe_drift.html">Chapter 11: Monitoring, Observability, Drifts</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../ch11_monitor_observe_drift/guide_monitor_observe_drift.html">Guide: ML System Failures, Data Distribution Shifts, Monitoring, and Observability</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../ch11_monitor_observe_drift/guide_interpretability_shap_lime.html">Interpretability, SHAP, LIME</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../ch11_monitor_observe_drift/guide_stack.html">Prometheus + Grafana and ELK Stacks</a></li>
</ul>
</li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../../ch12_retrain_online_testing/index.html">Continual learning, Retraining, A/B Testing</a><input class="toctree-checkbox" id="toctree-checkbox-20" name="toctree-checkbox-20" role="switch" type="checkbox"/><label for="toctree-checkbox-20"><div class="visually-hidden">Toggle navigation of Continual learning, Retraining, A/B Testing</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../../ch12_retrain_online_testing/ch12_continual_learning_prod_testing.html">Chapter 12: Continual Learning &amp; Production Testing</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../ch12_retrain_online_testing/guide_continual_learning.html">Continual Learning &amp; Model Retraining</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../ch12_retrain_online_testing/guide_ab_testing.html">A/B Testing</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../ch12_retrain_online_testing/guide_ab_testing_industry_lessons.html">A/B Testing &amp; Experimentation: Industry lessons</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../ch12_retrain_online_testing/guide_prod_testing_expt.html">Guide: Production Testing &amp; Experimentation</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../ch12_retrain_online_testing/dr_prod_testing_expt.html">Deep Research: Production Testing &amp; Experimentation</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../ch13_governance_ethics_human.html">Governance, Ethics &amp; The Human Element</a></li>
</ul>
</li>
</ul>
<ul>
<li class="toctree-l1 has-children"><a class="reference internal" href="../../../pytorch/index.html">PyTorch</a><input class="toctree-checkbox" id="toctree-checkbox-21" name="toctree-checkbox-21" role="switch" type="checkbox"/><label for="toctree-checkbox-21"><div class="visually-hidden">Toggle navigation of PyTorch</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../pytorch/general.html">General</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../pytorch/state_dict.html">state_dict</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../pytorch/mixed_precision.html">Mixed Precision</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../pytorch/distributed_data_parallel.html">Distributed Data Parallel</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../pytorch/ddp_under_the_hood.html">DDP: Under the Hood</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../pytorch/dp_ddp.html">DP vs DDP</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../pytorch/fsdp.html">FSDP</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../pytorch/tensor_parallelism.html">Tensor parallelism</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../pytorch/pipeline_parallelism.html">Pipeline Parallelism</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../pytorch/device_mesh.html">Device Mesh</a></li>
</ul>
</li>
</ul>
<ul>
<li class="toctree-l1 has-children"><a class="reference internal" href="../../../lld/index.html">Low Level Design</a><input class="toctree-checkbox" id="toctree-checkbox-22" name="toctree-checkbox-22" role="switch" type="checkbox"/><label for="toctree-checkbox-22"><div class="visually-hidden">Toggle navigation of Low Level Design</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../lld/parking_lot.html">Parking Lot</a></li>
</ul>
</li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../visualization/index.html">Data Visualization Projects</a></li>
</ul>

</div>
</div>

      </div>
      
    </div>
  </aside>
  <div class="main">
    <div class="content">
      <div class="article-container">
        <a href="#" class="back-to-top muted-link">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
            <path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12z"></path>
          </svg>
          <span>Back to top</span>
        </a>
        <div class="content-icon-container">
          <div class="view-this-page">
  <a class="muted-link" href="../../../_sources/mlops/ch6_feature_engg/feast/add_reuse_tests.md.txt" title="View this page">
    <svg><use href="#svg-eye"></use></svg>
    <span class="visually-hidden">View this page</span>
  </a>
</div>
<div class="theme-toggle-container theme-toggle-content">
            <button class="theme-toggle">
              <div class="visually-hidden">Toggle Light / Dark / Auto color theme</div>
              <svg class="theme-icon-when-auto-light"><use href="#svg-sun-with-moon"></use></svg>
              <svg class="theme-icon-when-auto-dark"><use href="#svg-moon-with-sun"></use></svg>
              <svg class="theme-icon-when-dark"><use href="#svg-moon"></use></svg>
              <svg class="theme-icon-when-light"><use href="#svg-sun"></use></svg>
            </button>
          </div>
          <label class="toc-overlay-icon toc-content-icon" for="__toc">
            <div class="visually-hidden">Toggle table of contents sidebar</div>
            <i class="icon"><svg><use href="#svg-toc"></use></svg></i>
          </label>
        </div>
        <article role="main" id="furo-main-content">
          <section id="adding-or-reusing-tests-in-feast">
<h1>Adding or Reusing Tests in Feast<a class="headerlink" href="#adding-or-reusing-tests-in-feast" title="Permalink to this heading">¶</a></h1>
<section id="id1">
<h2><a class="headerlink" href="#id1" title="Permalink to this heading">¶</a></h2>
<p>This guide explains the structure of Feast’s test suite and how to leverage or extend it, whether you’re adding new Feast functionality or testing a custom component like a new offline/online store.</p>
<section id="test-suite-overview">
<h3>1. Test Suite Overview<a class="headerlink" href="#test-suite-overview" title="Permalink to this heading">¶</a></h3>
<ul class="simple">
<li><p><strong>Location:</strong></p>
<ul>
<li><p>Unit Tests: <code class="docutils literal notranslate"><span class="pre">sdk/python/tests/unit</span></code></p></li>
<li><p>Integration Tests: <code class="docutils literal notranslate"><span class="pre">sdk/python/tests/integration</span></code></p></li>
</ul>
</li>
<li><p><strong>Key Directories within <code class="docutils literal notranslate"><span class="pre">sdk/python/tests/integration</span></code>:</strong></p>
<ul>
<li><p><code class="docutils literal notranslate"><span class="pre">e2e/</span></code>: End-to-end tests covering major user flows and server interactions.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">feature_repos/</span></code>: Contains setup files, configurations, and data source/online store creators for constructing test environments. The <code class="docutils literal notranslate"><span class="pre">universal/</span></code> subdirectory is crucial for tests that run against multiple store backends.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">offline_store/</span></code>: Tests specific to offline store functionalities like historical retrieval and push APIs.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">online_store/</span></code>: Tests specific to online store functionalities like online retrieval and push APIs.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">registration/</span></code>: Tests for <code class="docutils literal notranslate"><span class="pre">feast</span> <span class="pre">apply</span></code>, registry operations, CLI interactions, and type inference.</p></li>
</ul>
</li>
<li><p><strong><code class="docutils literal notranslate"><span class="pre">conftest.py</span></code> (in parent integration test directory):</strong> Defines common <a class="reference external" href="https://docs.pytest.org/en/6.2.x/fixture.html">pytest fixtures</a> used across many tests. These fixtures often abstract away specific store implementations, allowing tests to be “universal.”</p></li>
<li><p><strong>Parametrization:</strong> Tests are heavily parametrized to run against various combinations of offline stores, online stores, and providers without code duplication.</p></li>
</ul>
<div class="highlight-inline-grid notranslate"><div class="highlight"><pre><span></span>$ tree
.
├── e2e
│   ├── test_go_feature_server.py
│   ├── test_python_feature_server.py
│   ├── test_universal_e2e.py
│   └── test_validation.py
├── feature_repos
│   ├── integration_test_repo_config.py
│   ├── repo_configuration.py
│   └── universal
│       ├── catalog
│       ├── data_source_creator.py
│       ├── data_sources
│       │   ├── __init__.py
│       │   ├── bigquery.py
│       │   ├── file.py
│       │   ├── redshift.py
│       │   └── snowflake.py
│       ├── entities.py
│       ├── feature_views.py
│       ├── online_store
│       │   ├── __init__.py
│       │   ├── datastore.py
│       │   ├── dynamodb.py
│       │   ├── hbase.py
│       │   └── redis.py
│       └── online_store_creator.py
├── materialization
│   └── test_lambda.py
├── offline_store
│   ├── test_feature_logging.py
│   ├── test_offline_write.py
│   ├── test_push_features_to_offline_store.py
│   ├── test_s3_custom_endpoint.py
│   └── test_universal_historical_retrieval.py
├── online_store
│   ├── test_push_features_to_online_store.py
│   └── test_universal_online.py
└── registration
    ├── test_feature_store.py
    ├── test_inference.py
    ├── test_registry.py
    ├── test_universal_cli.py
    ├── test_universal_odfv_feature_inference.py
    └── test_universal_types.py

</pre></div>
</div>
</section>
<section id="structure-of-the-test-suite">
<h3>2. Structure of the Test Suite<a class="headerlink" href="#structure-of-the-test-suite" title="Permalink to this heading">¶</a></h3>
<ul class="simple">
<li><p><strong>Universal Feature Repo:</strong></p>
<ul>
<li><p>A core concept in Feast testing. It’s a set of fixtures (e.g., <code class="docutils literal notranslate"><span class="pre">environment</span></code>, <code class="docutils literal notranslate"><span class="pre">universal_data_sources</span></code> defined in <code class="docutils literal notranslate"><span class="pre">conftest.py</span></code> and <code class="docutils literal notranslate"><span class="pre">feature_repos/</span></code>) that can be parameterized to create test scenarios covering different offline stores (File, Redshift, BigQuery, Snowflake), online stores (SQLite, Redis, Datastore, DynamoDB), and providers (local, gcp, aws).</p></li>
<li><p>This allows writing a single test case that runs across many backend combinations.</p></li>
</ul>
</li>
<li><p><strong>Integration vs. Unit Tests:</strong></p>
<ul>
<li><p><strong>Integration Tests:</strong> Require external resources (e.g., actual cloud services like BigQuery, DynamoDB, or even Dockerized services if they mimic external dependencies). They test Feast’s behavior with these external systems and typically cover more complex functionalities.</p></li>
<li><p><strong>Unit Tests:</strong> Can run purely locally (Docker resources are sometimes considered part of local for unit testing if they are lightweight and self-contained). They test local Feast behavior, simple functionalities, or mocked interactions.</p></li>
</ul>
</li>
<li><p><strong>Main Types of Tests:</strong></p>
<ul>
<li><p><strong>Integration Tests:</strong></p>
<ul>
<li><p><strong>E2E tests:</strong> Verify end-to-end flows (<code class="docutils literal notranslate"><span class="pre">init</span></code>, <code class="docutils literal notranslate"><span class="pre">apply</span></code>, <code class="docutils literal notranslate"><span class="pre">materialize</span></code>, <code class="docutils literal notranslate"><span class="pre">get_historical_features</span></code>, <code class="docutils literal notranslate"><span class="pre">get_online_features</span></code>).</p>
<ul>
<li><p><code class="docutils literal notranslate"><span class="pre">test_universal_e2e.py</span></code>: Basic offline store e2e.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">test_go_feature_server.py</span></code>, <code class="docutils literal notranslate"><span class="pre">test_python_feature_server.py</span></code>: Server-specific e2e.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">test_validation.py</span></code>: Data quality monitoring (DQM) e2e.</p></li>
</ul>
</li>
<li><p><strong>Offline/Online Store Tests:</strong> Focus on retrieval and push APIs.</p>
<ul>
<li><p>Historical retrieval: <code class="docutils literal notranslate"><span class="pre">test_universal_historical_retrieval.py</span></code>.</p></li>
<li><p>Online retrieval: <code class="docutils literal notranslate"><span class="pre">test_universal_online.py</span></code>.</p></li>
<li><p>Push APIs: <code class="docutils literal notranslate"><span class="pre">test_push_features_to_offline_store.py</span></code>, <code class="docutils literal notranslate"><span class="pre">test_push_features_to_online_store.py</span></code>.</p></li>
</ul>
</li>
<li><p><strong>Registration Tests:</strong> Cover <code class="docutils literal notranslate"><span class="pre">feast</span> <span class="pre">apply</span></code>, <code class="docutils literal notranslate"><span class="pre">feast</span> <span class="pre">materialize</span></code> CLI commands (tested against universal setups), registry logic, and type inference.</p></li>
</ul>
</li>
<li><p><strong>Unit Tests:</strong></p>
<ul>
<li><p>Registry Diff Tests: Logic for determining infrastructure/registry changes.</p></li>
<li><p>Local CLI/Feast Tests: CLI commands against local file offline store.</p></li>
<li><p>Infrastructure Unit Tests: Mocked tests for specific components (e.g., DynamoDB), repo config, schema inference, key serialization.</p></li>
<li><p>Feature Store Validation Tests: Class-level validation (hashing, protobuf/class serialization, error handling) for <code class="docutils literal notranslate"><span class="pre">DataSource</span></code>, <code class="docutils literal notranslate"><span class="pre">FeatureView</span></code>, <code class="docutils literal notranslate"><span class="pre">FeatureService</span></code>, etc.</p></li>
</ul>
</li>
<li><p><strong>Docstring Tests:</strong> Smoke tests to ensure code examples in docstrings run without import or basic setup errors.</p></li>
</ul>
</li>
</ul>
</section>
<section id="understanding-the-test-suite-with-an-example">
<h3>3. Understanding the Test Suite with an Example<a class="headerlink" href="#understanding-the-test-suite-with-an-example" title="Permalink to this heading">¶</a></h3>
<p>The example test <code class="docutils literal notranslate"><span class="pre">test_historical_features</span></code> demonstrates key patterns:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="nd">@pytest</span><span class="o">.</span><span class="n">mark</span><span class="o">.</span><span class="n">integration</span>  <span class="c1"># Marks as an integration test</span>
<span class="nd">@pytest</span><span class="o">.</span><span class="n">mark</span><span class="o">.</span><span class="n">universal_offline_stores</span> <span class="c1"># Parametrizes across all universal offline stores</span>
<span class="nd">@pytest</span><span class="o">.</span><span class="n">mark</span><span class="o">.</span><span class="n">parametrize</span><span class="p">(</span><span class="s2">&quot;full_feature_names&quot;</span><span class="p">,</span> <span class="p">[</span><span class="kc">True</span><span class="p">,</span> <span class="kc">False</span><span class="p">])</span> <span class="c1"># Another parameter</span>
<span class="k">def</span> <span class="nf">test_historical_features</span><span class="p">(</span><span class="n">environment</span><span class="p">,</span> <span class="n">universal_data_sources</span><span class="p">,</span> <span class="n">full_feature_names</span><span class="p">):</span>
    <span class="n">store</span> <span class="o">=</span> <span class="n">environment</span><span class="o">.</span><span class="n">feature_store</span> <span class="c1"># &#39;environment&#39; fixture provides a configured FeatureStore</span>
    <span class="p">(</span><span class="n">entities</span><span class="p">,</span> <span class="n">datasets</span><span class="p">,</span> <span class="n">data_sources</span><span class="p">)</span> <span class="o">=</span> <span class="n">universal_data_sources</span> <span class="c1"># &#39;universal_data_sources&#39; provides test data</span>

    <span class="c1"># ... setup feature views, feature services ...</span>
    <span class="c1"># store.apply([...])</span>

    <span class="n">job_from_df</span> <span class="o">=</span> <span class="n">store</span><span class="o">.</span><span class="n">get_historical_features</span><span class="p">(</span>
        <span class="n">entity_df</span><span class="o">=</span><span class="n">entity_df_with_request_data</span><span class="p">,</span>
        <span class="n">features</span><span class="o">=</span><span class="p">[</span><span class="o">...</span><span class="p">],</span>
        <span class="n">full_feature_names</span><span class="o">=</span><span class="n">full_feature_names</span><span class="p">,</span>
    <span class="p">)</span>
    <span class="n">actual_df</span> <span class="o">=</span> <span class="n">job_from_df</span><span class="o">.</span><span class="n">to_df</span><span class="p">()</span>
    <span class="c1"># ... assertions (e.g., validate_dataframes(expected_df, actual_df, ...)) ...</span>
</pre></div>
</div>
<ul class="simple">
<li><p><strong>Key Fixtures:</strong></p>
<ul>
<li><p><code class="docutils literal notranslate"><span class="pre">environment</span></code>: Sets up a <code class="docutils literal notranslate"><span class="pre">FeatureStore</span></code> instance, parameterized by provider and online/offline store. It abstracts away the setup complexity of these stores. Each parameterization of <code class="docutils literal notranslate"><span class="pre">environment</span></code> creates an <code class="docutils literal notranslate"><span class="pre">IntegrationTestRepoConfig</span></code>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">universal_data_sources</span></code>: Provides standard entities, datasets (e.g., driver, customer data), and data sources for tests.</p></li>
</ul>
</li>
<li><p><strong>Markers:</strong></p>
<ul>
<li><p><code class="docutils literal notranslate"><span class="pre">&#64;pytest.mark.integration</span></code>: Designates it for <code class="docutils literal notranslate"><span class="pre">make</span> <span class="pre">test-python-integration</span></code>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">&#64;pytest.mark.universal_offline_stores</span></code>: Runs the test for each offline store defined in the universal setup (File, Redshift, BigQuery, Snowflake).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">&#64;pytest.mark.parametrize</span></code>: Standard pytest mechanism for running a test multiple times with different arguments.</p></li>
</ul>
</li>
</ul>
</section>
<section id="writing-a-new-test-or-reusing-existing-tests">
<h3>4. Writing a New Test or Reusing Existing Tests<a class="headerlink" href="#writing-a-new-test-or-reusing-existing-tests" title="Permalink to this heading">¶</a></h3>
<ul>
<li><p><strong>Adding a New Test to an Existing File:</strong></p>
<ul class="simple">
<li><p>Reuse existing fixture signatures (e.g., <code class="docutils literal notranslate"><span class="pre">environment</span></code>, <code class="docutils literal notranslate"><span class="pre">universal_data_sources</span></code>) to leverage the setup.</p></li>
<li><p>Prefer expanding existing tests over creating new ones if the logic is similar, to reduce the overhead of store spin-up/tear-down.</p></li>
<li><p>Use markers like <code class="docutils literal notranslate"><span class="pre">&#64;pytest.mark.universal_offline_stores</span></code> and <code class="docutils literal notranslate"><span class="pre">&#64;pytest.mark.universal_online_stores</span></code> for broad coverage. Can restrict to specific stores: <code class="docutils literal notranslate"><span class="pre">&#64;pytest.mark.universal_online_stores(only=[&quot;redis&quot;])</span></code>.</p></li>
</ul>
</li>
<li><p><strong>Testing a New Offline/Online Store (from a Plugin Repo):</strong></p>
<ul class="simple">
<li><p>Install Feast in editable mode: <code class="docutils literal notranslate"><span class="pre">pip</span> <span class="pre">install</span> <span class="pre">-e</span> <span class="pre">.</span></code> (from Feast root).</p></li>
<li><p>The core tests are parameterized by <code class="docutils literal notranslate"><span class="pre">FULL_REPO_CONFIGS</span></code> (defined in <code class="docutils literal notranslate"><span class="pre">feature_repos/repo_configuration.py</span></code>).</p></li>
<li><p>To test your plugin:</p>
<ol class="arabic simple">
<li><p>Create your own Python file (e.g., <code class="docutils literal notranslate"><span class="pre">my_plugin_configs.py</span></code>) defining a new <code class="docutils literal notranslate"><span class="pre">FULL_REPO_CONFIGS</span></code> list that includes <code class="docutils literal notranslate"><span class="pre">IntegrationTestRepoConfig</span></code> instances for your custom store.</p></li>
<li><p>Set the environment variable <code class="docutils literal notranslate"><span class="pre">FULL_REPO_CONFIGS_MODULE=my_plugin_configs</span></code> (module path).</p></li>
<li><p>Run core tests: <code class="docutils literal notranslate"><span class="pre">make</span> <span class="pre">test-python-universal</span></code>.</p></li>
</ol>
</li>
<li><p>Refer to <code class="docutils literal notranslate"><span class="pre">feast-custom-offline-store-demo</span></code> and <code class="docutils literal notranslate"><span class="pre">feast-custom-online-store-demo</span></code> GitHub repos for examples.</p></li>
</ul>
</li>
<li><p><strong>Important Considerations for New Stores:</strong></p>
<ul class="simple">
<li><p><strong>Type Mapping/Inference:</strong></p>
<ul>
<li><p>Update <code class="docutils literal notranslate"><span class="pre">feast.infra.offline_stores.offline_utils.inference</span></code> (or similar for online stores) so Feast can infer schemas from your data source.</p></li>
<li><p>Update <code class="docutils literal notranslate"><span class="pre">feast.infra.utils.type_map</span></code> so Feast can convert your store’s native data types to/from <code class="docutils literal notranslate"><span class="pre">feast.types</span></code> (e.g., <code class="docutils literal notranslate"><span class="pre">ValueType.INT64</span></code>).</p></li>
</ul>
</li>
<li><p><strong>Historical and Online Retrieval:</strong> These are the most critical functionalities. Ensuring they work correctly implicitly tests many underlying read/write operations.</p></li>
</ul>
</li>
<li><p><strong>Including a New Offline/Online Store in the Main Feast Repo:</strong></p>
<ul class="simple">
<li><p><strong>Offline Store:</strong></p>
<ul>
<li><p>Extend <code class="docutils literal notranslate"><span class="pre">feature_repos/universal/data_source_creator.py</span></code>.</p></li>
<li><p>Add new <code class="docutils literal notranslate"><span class="pre">IntegrationTestRepoConfig</span></code>(s) to <code class="docutils literal notranslate"><span class="pre">feature_repos/repo_configuration.py</span></code> (usually test against SQLite online store; Redis/DynamoDB if production online store interactions are critical).</p></li>
</ul>
</li>
<li><p><strong>Online Store:</strong></p>
<ul>
<li><p>Add new configuration serialization logic if needed in <code class="docutils literal notranslate"><span class="pre">repo_configuration.py</span></code>.</p></li>
<li><p>Add new <code class="docutils literal notranslate"><span class="pre">IntegrationTestRepoConfig</span></code>(s) for the online store in <code class="docutils literal notranslate"><span class="pre">repo_configuration.py</span></code>.</p></li>
</ul>
</li>
<li><p>Run full integration suite: <code class="docutils literal notranslate"><span class="pre">make</span> <span class="pre">test-python-integration</span></code>.</p></li>
</ul>
</li>
<li><p><strong>Including a New Store from External Plugins (Community Maintained):</strong></p>
<ul class="simple">
<li><p>Code goes into <code class="docutils literal notranslate"><span class="pre">feast/infra/offline_stores/contrib/</span></code> or <code class="docutils literal notranslate"><span class="pre">feast/infra/online_stores/contrib/</span></code>.</p></li>
<li><p>Extend <code class="docutils literal notranslate"><span class="pre">contrib_data_source_creator.py</span></code> (if offline).</p></li>
<li><p>Add <code class="docutils literal notranslate"><span class="pre">IntegrationTestRepoConfig</span></code> to <code class="docutils literal notranslate"><span class="pre">contrib_repo_configuration.py</span></code>.</p></li>
<li><p>Run contrib tests: <code class="docutils literal notranslate"><span class="pre">make</span> <span class="pre">test-python-contrib-universal</span></code>.</p></li>
</ul>
</li>
<li><p><strong>Using Custom Data in a New Test:</strong></p>
<ul class="simple">
<li><p>See <code class="docutils literal notranslate"><span class="pre">test_universal_types.py</span></code> for an example.</p></li>
<li><p>Essentially, create a DataFrame, then use <code class="docutils literal notranslate"><span class="pre">environment.data_source_creator.create_data_source(df,</span> <span class="pre">...)</span></code> to load it into the currently parameterized offline store for the test.</p></li>
</ul>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="nd">@pytest</span><span class="o">.</span><span class="n">mark</span><span class="o">.</span><span class="n">integration</span>
<span class="k">def</span> <span class="nf">your_test</span><span class="p">(</span><span class="n">environment</span><span class="p">:</span> <span class="n">Environment</span><span class="p">):</span> <span class="c1"># Environment fixture</span>
    <span class="n">my_df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="o">...</span><span class="p">)</span>
    <span class="c1"># Use the environment&#39;s data_source_creator to make it compatible with the current offline store</span>
    <span class="n">data_source</span> <span class="o">=</span> <span class="n">environment</span><span class="o">.</span><span class="n">data_source_creator</span><span class="o">.</span><span class="n">create_data_source</span><span class="p">(</span>
        <span class="n">my_df</span><span class="p">,</span>
        <span class="n">destination_name</span><span class="o">=</span><span class="n">environment</span><span class="o">.</span><span class="n">feature_store</span><span class="o">.</span><span class="n">project</span> <span class="o">+</span> <span class="s2">&quot;_my_custom_table&quot;</span>
    <span class="p">)</span>
    <span class="c1"># Define FeatureView using this data_source</span>
    <span class="n">my_fv</span> <span class="o">=</span> <span class="n">FeatureView</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s2">&quot;my_custom_fv&quot;</span><span class="p">,</span> <span class="n">source</span><span class="o">=</span><span class="n">data_source</span><span class="p">,</span> <span class="o">...</span><span class="p">)</span>
    <span class="n">fs</span> <span class="o">=</span> <span class="n">environment</span><span class="o">.</span><span class="n">feature_store</span>
    <span class="n">fs</span><span class="o">.</span><span class="n">apply</span><span class="p">([</span><span class="n">my_fv</span><span class="p">,</span> <span class="o">...</span><span class="p">])</span>
    <span class="c1"># ... rest of your test logic ...</span>
</pre></div>
</div>
</li>
<li><p><strong>Running Your Own Redis Cluster for Testing:</strong></p>
<ul class="simple">
<li><p>Install Redis locally (e.g., <code class="docutils literal notranslate"><span class="pre">brew</span> <span class="pre">install</span> <span class="pre">redis</span></code>).</p></li>
<li><p>Use scripts in <code class="docutils literal notranslate"><span class="pre">infra/scripts/redis-cluster.sh</span></code> (<code class="docutils literal notranslate"><span class="pre">start</span></code>, <code class="docutils literal notranslate"><span class="pre">create</span></code>, <code class="docutils literal notranslate"><span class="pre">stop</span></code>, <code class="docutils literal notranslate"><span class="pre">clean</span></code>) to manage a local Redis cluster for testing. This allows Redis-specific integration tests to pass locally.</p></li>
</ul>
</li>
</ul>
<p>This testing framework is essential for maintaining Feast’s quality and ensuring compatibility across its supported (and pluggable) infrastructure components.</p>
</section>
</section>
</section>

        </article>
      </div>
      <footer>
        
        <div class="related-pages">
          <a class="next-page" href="../../ch7_model_development/index.html">
              <div class="page-info">
                <div class="context">
                  <span>Next</span>
                </div>
                <div class="title">Model Development, Tuning, Selection, Ensembles, Calibration</div>
              </div>
              <svg class="furo-related-icon"><use href="#svg-arrow-right"></use></svg>
            </a>
          <a class="prev-page" href="validate_historical_with_gx.html">
              <svg class="furo-related-icon"><use href="#svg-arrow-right"></use></svg>
              <div class="page-info">
                <div class="context">
                  <span>Previous</span>
                </div>
                
                <div class="title">Validating Historical Features with Great Expectations</div>
                
              </div>
            </a>
        </div>
        <div class="bottom-of-page">
          <div class="left-details">
            <div class="copyright">
                Copyright &#169; 2024, Deepak Karkala
            </div>
            Made with <a href="https://www.sphinx-doc.org/">Sphinx</a> and <a class="muted-link" href="https://pradyunsg.me">@pradyunsg</a>'s
            
            <a href="https://github.com/pradyunsg/furo">Furo</a>
            
          </div>
          <div class="right-details">
            
          </div>
        </div>
        
      </footer>
    </div>
    <aside class="toc-drawer">
      
      
      <div class="toc-sticky toc-scroll">
        <div class="toc-title-container">
          <span class="toc-title">
            On this page
          </span>
        </div>
        <div class="toc-tree-container">
          <div class="toc-tree">
            <ul>
<li><a class="reference internal" href="#">Adding or Reusing Tests in Feast</a><ul>
<li><a class="reference internal" href="#id1"></a><ul>
<li><a class="reference internal" href="#test-suite-overview">1. Test Suite Overview</a></li>
<li><a class="reference internal" href="#structure-of-the-test-suite">2. Structure of the Test Suite</a></li>
<li><a class="reference internal" href="#understanding-the-test-suite-with-an-example">3. Understanding the Test Suite with an Example</a></li>
<li><a class="reference internal" href="#writing-a-new-test-or-reusing-existing-tests">4. Writing a New Test or Reusing Existing Tests</a></li>
</ul>
</li>
</ul>
</li>
</ul>

          </div>
        </div>
      </div>
      
      
    </aside>
  </div>
</div><script data-url_root="../../../" id="documentation_options" src="../../../_static/documentation_options.js?v=b3ba4146"></script>
    <script src="../../../_static/doctools.js?v=888ff710"></script>
    <script src="../../../_static/sphinx_highlight.js?v=4825356b"></script>
    <script src="../../../_static/scripts/furo.js?v=4e2eecee"></script>
    </body>
</html>